# üåå Planetarium API

–ü—Ä–æ—î–∫—Ç ‚Äî API –¥–ª—è –ø–ª–∞–Ω–µ—Ç–∞—Ä—ñ—é –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è –∫–≤–∏—Ç–∫—ñ–≤, –ø–µ—Ä–µ–≥–ª—è–¥—É —à–æ—É, —Ç–µ–º, –∫—É–ø–æ–ª—É —Ç–æ—â–æ. –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –Ω–∞ Django + Django REST Framework.

---

## üì¶ –í–º—ñ—Å—Ç

- [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–æ](#-–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è-–ª–æ–∫–∞–ª—å–Ω–æ)
- [–ó–∞–ø—É—Å–∫ —É Docker](#-–∑–∞–ø—É—Å–∫-—É-docker)
- [–ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è](#-–∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è)
- [–î–æ—Å—Ç—É–ø–Ω—ñ –µ–Ω–¥–ø–æ—ó–Ω—Ç–∏](#-–¥–æ—Å—Ç—É–ø–Ω—ñ-–µ–Ω–¥–ø–æ—ó–Ω—Ç–∏)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è Swagger / Redoc](#-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è)

---

## üîß –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–æ

1. –ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:

```bash
git clone https://github.com/Odin-max/planetarium_api_service.git
cd planetarium_api_service
```

2. –°—Ç–≤–æ—Ä–∏—Ç–∏ `.env` —Ñ–∞–π–ª:

```env
SQL_ENGINE=django.db.backends.postgresql
SQL_DATABASE=planetarium
SQL_USER=postgres
SQL_PASSWORD=postgres
SQL_HOST=localhost
SQL_PORT=5432
DEBUG=True
SECRET_KEY=your-secret-key
ALLOWED_HOSTS=127.0.0.1,localhost
```

3. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

```bash
poetry install
```

4. –í–∏–∫–æ–Ω–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó:

```bash
poetry run python manage.py migrate
```

5. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä:

```bash
poetry run python manage.py runserver
```

---

## üê≥ –ó–∞–ø—É—Å–∫ —É Docker

### ‚öôÔ∏è –ó–±—ñ—Ä–∫–∞ —Ç–∞ –∑–∞–ø—É—Å–∫

```bash
docker-compose up --build
```

> –í–ø–µ—Ä—à–µ —Ü–µ –º–æ–∂–µ –∑–∞–π–Ω—è—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ö–≤–∏–ª–∏–Ω.


## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

JWT —Ç–æ–∫–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤—ñ `djangorestframework-simplejwt`.

### –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
`POST /api/user/register/`

### –û—Ç—Ä–∏–º–∞—Ç–∏ —Ç–æ–∫–µ–Ω
`POST /api/user/token/`  
```json
{
  "email": "user@example.com",
  "password": "yourpassword"
}
```

### –û—Ç—Ä–∏–º–∞—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞
`POST /api/user/token/refresh/`

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
`POST /api/user/token/verify/`

### –û—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
`GET /api/user/me/`

> ‚ö†Ô∏è –ù–µ –∑–∞–±—É–¥—å –¥–æ–¥–∞—Ç–∏ `Authorization: Bearer <your_token>` —É –∑–∞–≥–æ–ª–æ–≤–æ–∫.

---

## üß™ –¢–µ—Å—Ç–∏

```bash
poetry run python manage.py test
```

---

## üåê –î–æ—Å—Ç—É–ø–Ω—ñ –µ–Ω–¥–ø–æ—ó–Ω—Ç–∏

–ë–∞–∑–æ–≤–∏–π –ø—Ä–µ—Ñ—ñ–∫—Å: `http://localhost:8000/api/planetarium/`

| –†–µ—Å—É—Ä—Å       | –ú–µ—Ç–æ–¥ | Endpoint                       | –û–ø–∏—Å                                |
|--------------|-------|--------------------------------|-------------------------------------|
| Show Themes  | GET   | `/themes/`                     | –ü–µ—Ä–µ–ª—ñ–∫ —Ç–µ–º                         |
|              | POST  | `/themes/`                     | –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–µ–º—É                       |
|              | GET   | `/themes/{id}/`                | –î–µ—Ç–∞–ª—ñ —Ç–µ–º–∏                         |
|              | PUT   | `/themes/{id}/`                | –û–Ω–æ–≤–∏—Ç–∏ —Ç–µ–º—É                        |
|              | DELETE| `/themes/{id}/`                | –í–∏–¥–∞–ª–∏—Ç–∏ —Ç–µ–º—É                       |
| Shows        | GET   | `/shows/`                      | –ü–µ—Ä–µ–ª—ñ–∫ —à–æ—É                         |
|              | POST  | `/shows/`                      | –°—Ç–≤–æ—Ä–∏—Ç–∏ —à–æ—É                        |
|              | GET   | `/shows/{id}/`                 | –î–µ—Ç–∞–ª—ñ —à–æ—É                          |
|              | PUT   | `/shows/{id}/`                 | –û–Ω–æ–≤–∏—Ç–∏ —à–æ—É                         |
|              | DELETE| `/shows/{id}/`                 | –í–∏–¥–∞–ª–∏—Ç–∏ —à–æ—É                        |
|              | POST  | `/shows/{id}/upload-image/`    | –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–ª—è —à–æ—É     |
| Domes        | GET   | `/domes/`                      | –ü–µ—Ä–µ–ª—ñ–∫ –∫—É–ø–æ–ª—ñ–≤                     |
| Sessions     | GET   | `/sessions/`                   | –ü–µ—Ä–µ–ª—ñ–∫ —Å–µ–∞–Ω—Å—ñ–≤                     |
| Reservations | GET   | `/reservations/`               | –ü–µ—Ä–µ–ª—ñ–∫ –±—Ä–æ–Ω—é–≤–∞–Ω—å                   |
|              | POST  | `/reservations/`               | –°—Ç–≤–æ—Ä–∏—Ç–∏ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è –∑ –∫–≤–∏—Ç–∫–∞–º–∏     |

---

## üë§ –ï–Ω–¥–ø–æ—ó–Ω—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (`/api/user/`)

| –ú–µ—Ç–æ–¥ | Endpoint              | –û–ø–∏—Å                                |
|--------|------------------------|-------------------------------------|
| POST   | `/register/`          | –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞    |
| POST   | `/token/`             | –û—Ç—Ä–∏–º–∞—Ç–∏ JWT —Ç–æ–∫–µ–Ω                  |
| POST   | `/token/refresh/`     | –û–Ω–æ–≤–∏—Ç–∏ access —Ç–æ–∫–µ–Ω                |
| POST   | `/token/verify/`      | –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∞–ª—ñ–¥–Ω—ñ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞       |
| GET    | `/me/`                | –û—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ) |
| PUT    | `/me/`                | –ü–æ–≤–Ω—ñ—Å—Ç—é –æ–Ω–æ–≤–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞        |
| PATCH  | `/me/`                | –ß–∞—Å—Ç–∫–æ–≤–æ –æ–Ω–æ–≤–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞        |

> üõ°Ô∏è –£—Å—ñ –µ–Ω–¥–ø–æ—ó–Ω—Ç–∏, –æ–∫—Ä—ñ–º `/register/` —Ç–∞ `/token/`, –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó:  
`Authorization: Bearer <your_token>`

## üìò –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- Swagger UI: [http://localhost:8000/api/doc/swagger/](http://localhost:8000/api/doc/swagger/)
- Redoc: [http://localhost:8000/api/doc/redoc/](http://localhost:8000/api/doc/redoc/)

---
